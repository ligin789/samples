import * as React from "react";
import { styled } from "@mui/system";
import { AdapterDayjs } from "@mui/x-date-pickers/AdapterDayjs";
import { LocalizationProvider } from "@mui/x-date-pickers/LocalizationProvider";
import { DatePicker } from "@mui/x-date-pickers/DatePicker";
import ArrowBackIcon from "@mui/icons-material/ArrowBack";
import ArrowForwardIcon from "@mui/icons-material/ArrowForward";
import ChangeCircleIcon from "@mui/icons-material/ChangeCircle";
import MoreTimeIcon from "@mui/icons-material/MoreTime";
import moment from "moment";
import dayjs from 'dayjs';
import 'date-fns/locale/en-GB';

const OpenPickerIcon = styled(MoreTimeIcon)({
  //   backgroundColor: "red"
  color: "#CECECE",
});

const LeftArrowIcon = styled(ArrowBackIcon)({
  backgroundColor: "red",
});

const RightArrowIcon = styled(ArrowForwardIcon)({
  backgroundColor: "red",
});

const SwitchViewIcon = styled(ChangeCircleIcon)({
  backgroundColor: "red",
});

export default function BasicDatePicker({ label, id, setTime, value }: any) {
  // const [testValue,setTestValue]=React.useState(moment(moment.now()).format('YYYY-MM-DDTHH:mm'))
  const [testValue,setTestValue]=React.useState(value!=''?moment(value,'YYYY-MM-DDTHH:mm:SS').format('YYYY-MM-DDTHH:mm'):'')
  console.log('check the input value ==> ',value)
  return (
    <LocalizationProvider dateAdapter={AdapterDayjs} adapterLocale={"enGB"} >
      {/* <DatePicker
        sx={{
          // backgroundColor:"pink",
          minWidth: "50px !important",
          // width: "140px",
          // borderColor: "#CECECE",
          "& .css-nxo287-MuiInputBase-input-MuiOutlinedInput-input": {
            padding: "4px 0px 5px 4px",
            width: "60%",
            color: "#CECECE",
          },
          "& .css-14s5rfu-MuiFormLabel-root-MuiInputLabel-root": {
            top: "-11px",
            color: "#CECECE",
          },
          "& .css-o9k5xi-MuiInputBase-root-MuiOutlinedInput-root": {
            paddingRight: "0px",
            justifyContent: "space-between",
            padding: "8px 14px",
            borderRadius: "7px",
            backgroundColor: "white"
          },
          "& .css-10o2lyd-MuiStack-root": { paddingBottom: "8px" },
          "& .css-1laqsz7-MuiInputAdornment-root": { marginLeft: "-16px" },
          "& .css-1d3z3hw-MuiOutlinedInput-notchedOutline": {borderColor:"rgba(0, 0, 0, 0.23) !important"}
        }}
        // label={label}
        slots={{
          openPickerIcon: OpenPickerIcon,
          //   leftArrowIcon: LeftArrowIcon,
          //   rightArrowIcon: RightArrowIcon,
          //   switchViewIcon: SwitchViewIcon
        }}
        onChange={(val: any) =>
          {
              setTime(`${moment(new Date(val)).format("YYYY-MM-DDTHH:mm:ss")}Z`)
          }
        }
        value={dayjs(value)}
      /> */}
      <input type="datetime-local" 
        // value={moment(value,'YYYY-MM-DDTHH:mm:ss').format('YYYY-MM-DDTHH:mm')} 
        value={testValue} 
        onChange={(e) =>{
          // console.log('check the input value ==> ',e.target.value)
          setTime(`${moment(e.target.value,'YYYY-MM-DDTHH:mm').format("YYYY-MM-DDTHH:mm:ss")}Z`)
          setTestValue(e.target.value)
        }}
        style={{marginTop:'6px',border:'1px solid rgb(221, 221, 221)',height:'40px',borderRadius:'7px',paddingLeft:'14px',paddingRight:'14px'}}
        />
    </LocalizationProvider>
  );
}
